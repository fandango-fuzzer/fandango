version: '3'

services:
  fake-smtp-server:
    build: .
    image: my-smtp-with-coverage
    hostname: "fake-smtp-server"
    restart: always
    environment:
      - FAKESMTP_AUTHENTICATION_USERNAME=the_user
      - FAKESMTP_AUTHENTICATION_PASSWORD=the_password
    ports:
      - 8025:8025      # expose smtp port
      - 8080:8080      # expose web ui
      - 8081:8081      # expose management api
      - 6300:6300      # expose JaCoCo TCP control port
    volumes:
      - ./coverage:/coverage